{% extends 'base.html' %}

{% block title %}–ü—Ä–æ—Ñ–∏–ª—å {{ profile.nickname }} - –°–∞–π—Ç –∑–Ω–∞–∫–æ–º—Å—Ç–≤{% endblock %}

{% block content %}
<div class="profile-header">
    <div class="profile-main-photo">
        {% if profile.primary_photo %}
            <img src="{{ profile.primary_photo.photo.url }}" alt="{{ profile.nickname }}" class="profile-main-photo">
        {% else %}
            <div class="profile-main-photo d-flex align-center justify-center" style="background: var(--border); color: var(--text-secondary); font-size: 6rem;">
                {% if profile.gender == 'male' %}üë®{% elif profile.gender == 'female' %}üë©{% else %}üë§{% endif %}
            </div>
        {% endif %}
    </div>
    
    <div class="profile-details">
        <h1 class="profile-title">
            {% if profile.gender == 'male' %}üë®{% elif profile.gender == 'female' %}üë©{% else %}üë§{% endif %}
            {{ profile.nickname }}
        </h1>
        <p class="profile-subtitle">
            {% if profile.age %}{{ profile.age }} –ª–µ—Ç{% endif %}
            {% if profile.city %}üìç {{ profile.get_city_display }}{% endif %}
        </p>
        <p class="text-secondary">
            <strong>–ü–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞—Ö–æ–¥:</strong> {{ profile.last_online|date:"d.m.Y H:i" }}
        </p>
        
        <!-- Action buttons -->
        <div class="d-flex gap-2 mt-2">
            {% if is_own %}
                <a href="/profiles/edit/" class="btn btn-primary">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                <a href="/profiles/photos/" class="btn btn-secondary">üì∏ –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏</a>
            {% else %}
                <a href="/profiles/message/{{ profile.user.id }}/" class="btn btn-primary">üíå –ù–∞–ø–∏—Å–∞—Ç—å</a>
                <a href="/profiles/report/{{ profile.user.id }}/" class="btn btn-outline">‚ö†Ô∏è –ü–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è</a>
            {% endif %}
            <a href="/" class="btn btn-outline">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
        </div>
    </div>
</div>

<!-- Photos Gallery -->
{% if photos %}
<div class="photos-gallery">
    <h2 class="gallery-title">üì∏ –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏</h2>
    <div class="photos-grid">
        {% for photo in photos %}
            <div class="photo-item">
                <img src="{{ photo.image.url }}" alt="–§–æ—Ç–æ {{ profile.nickname }}" onerror="this.parentElement.style.display='none';">
                {% if photo.is_primary %}
                    <div class="photo-overlay">
                        <span style="background: var(--primary-color); color: white; padding: 0.25rem 0.5rem; border-radius: var(--border-radius); font-size: 0.8rem;">
                            üåü –û—Å–Ω–æ–≤–Ω–∞—è
                        </span>
                    </div>
                {% endif %}
            </div>
        {% endfor %}
    </div>
</div>
{% endif %}

<!-- Profile Information -->
<div class="grid grid-2 mt-3">
    <!-- Basic Info -->
    <div class="card">
        <h3>üìã –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
        <div class="profile-stats">
            <div class="profile-stat">
                <div class="profile-stat-value">{{ profile.height }}</div>
                <div class="profile-stat-label">—Å–º (—Ä–æ—Å—Ç)</div>
            </div>
            <div class="profile-stat">
                <div class="profile-stat-value">{{ profile.weight }}</div>
                <div class="profile-stat-label">–∫–≥ (–≤–µ—Å)</div>
            </div>
        </div>
        
        <div class="mt-2">
            <p><strong>–ì—Ä—É–ø–ø–∞ –∫—Ä–æ–≤–∏:</strong> {{ profile.get_blood_group_display }}</p>
            <p><strong>–ü–æ–ª:</strong> {{ profile.get_gender_display }}</p>
        </div>
    </div>

    <!-- Personal Info -->
    <div class="card">
        <h3>üíù –õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
        <p><strong>–û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è:</strong> {{ profile.get_orientation_display }}</p>
        <p><strong>–°–µ–º–µ–π–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ:</strong> {{ profile.get_marital_status_display }}</p>
        <p><strong>–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:</strong> {{ profile.get_education_display }}</p>
        <p><strong>–ó–∞–Ω—è—Ç–æ—Å—Ç—å:</strong> {{ profile.get_employment_display }}</p>
        
        {% if profile.goal %}
        <div class="mt-2">
            <strong>–¶–µ–ª—å –ø–æ–∏—Å–∫–∞:</strong><br>
            <span class="text-secondary">{{ profile.goal }}</span>
        </div>
        {% endif %}
    </div>
</div>

<!-- Lifestyle -->
<div class="card mt-3">
    <h3>üèÉ –û–±—Ä–∞–∑ –∂–∏–∑–Ω–∏</h3>
    <div class="grid grid-4">
        <div class="profile-stat">
            <div class="profile-stat-label">–ö—É—Ä–µ–Ω–∏–µ</div>
            <div class="profile-stat-value" style="font-size: 1rem;">{{ profile.get_smoking_display }}</div>
        </div>
        <div class="profile-stat">
            <div class="profile-stat-label">–ê–ª–∫–æ–≥–æ–ª—å</div>
            <div class="profile-stat-value" style="font-size: 1rem;">{{ profile.get_alcohol_display }}</div>
        </div>
        <div class="profile-stat">
            <div class="profile-stat-label">–°–ø–æ—Ä—Ç</div>
            <div class="profile-stat-value" style="font-size: 1rem;">{{ profile.get_sport_display }}</div>
        </div>
        <div class="profile-stat">
            <div class="profile-stat-label">–ó–¥–æ—Ä–æ–≤—å–µ</div>
            <div class="profile-stat-value">{{ profile.health_rating }}/10</div>
        </div>
    </div>
</div>

<!-- About section -->
{% if profile.about %}
<div class="card mt-3">
    <h3>üìù –û —Å–µ–±–µ</h3>
    <p>{{ profile.about|linebreaks }}</p>
</div>
{% endif %}

<!-- Additional information for own profile -->
{% if is_own %}
<div class="alert alert-info mt-3">
    <h4>üí° –°–æ–≤–µ—Ç—ã –ø–æ –ø—Ä–æ—Ñ–∏–ª—é</h4>
    <ul class="mb-0">
        <li>–î–æ–±–∞–≤—å—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π</li>
        <li>–ù–∞–ø–∏—à–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –æ —Å–µ–±–µ</li>
        <li>–£–∫–∞–∂–∏—Ç–µ —Å–≤–æ–∏ –∏–Ω—Ç–µ—Ä–µ—Å—ã –∏ —É–≤–ª–µ—á–µ–Ω–∏—è</li>
        <li>–ë—É–¥—å—Ç–µ —á–µ—Å—Ç–Ω—ã–º–∏ –≤ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è</li>
    </ul>
</div>
{% endif %}
{% endblock %} 